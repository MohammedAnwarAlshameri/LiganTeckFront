<!-- Language / Locale switcher -->
<header class="langbar" aria-label="language switcher">
  <div class="lang-switch" (click)="toggleLanguageMenu()" [attr.aria-expanded]="isLanguageMenuOpen">
    <div class="globe" aria-hidden="true">ğŸŒ</div>
    <span>{{ currentLanguage === 'ar' ? 'Ar' : 'En' }}</span>
    <span class="caret">â–¾</span>
  </div>
  <div class="lang-menu" [hidden]="!isLanguageMenuOpen" role="menu">
    <button (click)="changeLanguage('ar')" role="menuitem">Arabic</button>
    <button (click)="changeLanguage('en')" role="menuitem">English</button>
  </div>
</header>

<main class="split" id="app">
  <!-- Left: Login form -->
  <section class="pane left">
    <form class="card" [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
      <h2 class="title">{{ currentLanguage === 'ar' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Sign In' }}</h2>
      <p class="subtitle muted" [innerHTML]="currentLanguage === 'ar' ? 'Ù‚Ù… Ø¨ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¥Ù„Ù‰ <b>Lijan Teck</b>.' : 'Sign in to <b>Lijan Teck</b>.'"></p>

      <!-- Toggle Ù„Ù„ØªØ¨Ø¯ÙŠÙ„ Ø¨ÙŠÙ† Admin Ùˆ Customer -->
      <div class="login-mode-toggle">
        <button 
          type="button" 
          [class.active]="!isAdminMode" 
          (click)="isAdminMode = false; error = ''"
          class="mode-btn"
        >
          <i class="mdi mdi-account"></i>
          {{ currentLanguage === 'ar' ? 'Ø¹Ù…ÙŠÙ„' : 'Customer' }}
        </button>
        <button 
          type="button" 
          [class.active]="isAdminMode" 
          (click)="isAdminMode = true; error = ''"
          class="mode-btn"
        >
          <i class="mdi mdi-shield-account"></i>
          {{ currentLanguage === 'ar' ? 'Ù…Ø¯ÙŠØ±' : 'Admin' }}
        </button>
      </div>

      <div class="field">
        <label for="username">{{ currentLanguage === 'ar' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Login' }}</label>
        <input 
          id="username" 
          name="username" 
          class="inp" 
          type="text" 
          formControlName="email"
          [placeholder]="currentLanguage === 'ar' ? 'Username' : 'Username'" 
          autocomplete="username" 
          [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
        />
        @if (submitted && f['email'].errors) {
          <div class="error">
            {{ currentLanguage === 'ar' ? 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø·Ù„ÙˆØ¨' : 'Username is required' }}
          </div>
        }
      </div>

      <div class="field">
        <label for="password">{{ currentLanguage === 'ar' ? 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' : 'Password' }}</label>
      
        <!-- Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¹ Ø²Ø± Ø§Ù„Ø¹ÙŠÙ† Ø¯Ø§Ø®Ù„ Ø§Ù„Ø­Ù‚Ù„ -->
        <div class="auth-pass-inputgroup">
          <input
            id="password"
            name="password"
            class="inp"
            [type]="fieldTextType ? 'text' : 'password'"
            formControlName="password"
            [placeholder]="currentLanguage === 'ar' ? 'Password' : 'Password'"
            autocomplete="current-password"
            [ngClass]="{ 'is-invalid': submitted && f['password'].errors }"
          />
        </div>
      
        @if (submitted && f['password'].errors) {
          <div class="error">
            {{ currentLanguage === 'ar' ? 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨Ø©' : 'Password is required' }}
          </div>
        }
      </div>
      
      <div class="actions">
        <button class="btn" type="submit" [disabled]="loading">
          {{ loading ? (currentLanguage === 'ar' ? 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...' : 'Loading...') : (currentLanguage === 'ar' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Sign In') }}
        </button>

        <div class="helper">
          <label>
            <input type="checkbox" id="remember" formControlName="remember" />
            <span class="muted">{{ currentLanguage === 'ar' ? 'ØªØ°ÙƒØ±Ù†ÙŠ' : 'Remember me' }}</span>
          </label>
          <span style="flex:1"></span>
          <a routerLink="/auth/pass-reset" class="muted">
            {{ currentLanguage === 'ar' ? 'Ù†Ø³ÙŠØª ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±ØŸ' : 'Forgot password?' }}
          </a>
        </div>
        
        <div class="cta-inline muted">
          <span>{{ currentLanguage === 'ar' ? 'Ù„Ø§ ØªÙ…ØªÙ„Ùƒ Ø­Ø³Ø§Ø¨Ø§Ù‹ØŸ' : "Don't have an account?" }}</span>
          <a routerLink="/auth/register">{{ currentLanguage === 'ar' ? 'Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ø§Ù‹ Ø¬Ø¯ÙŠØ¯Ø§Ù‹' : 'Create a new account' }}</a>
        </div>
                
        @if (error) {
          <div class="error" aria-live="polite">{{ error }}</div>
        }
      </div>
    </form>

    <footer>
      <div class="foot">
        Â© {{ year }} <strong>Logix</strong> â€” 
        {{ currentLanguage === 'ar' ? 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©. Ù„ÙˆØ¬ÙƒØ³ ÙˆÙ„Ø¬Ø§Ù† ØªÙƒ Ø¹Ù„Ø§Ù…Ø§Øª ØªØ¬Ø§Ø±ÙŠØ©.' : 'All rights reserved. Logix and Lijan Teck are trademarks.' }}
      </div>
    </footer>
  </section>

  <!-- Right: Logo / brand panel -->
  <aside class="pane right">
    <div class="brand" aria-label="Logix â€“ Lijan Teck brand">
      <div class="logo" aria-hidden="true">LJ</div>
      <h1>Lijan Teck</h1>
      <div class="tag">Logix</div>
    </div>
  </aside>
</main>