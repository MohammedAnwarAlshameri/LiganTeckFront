<!-- Language / Locale switcher -->
<header class="langbar" aria-label="language switcher">
  <div class="lang-switch" (click)="toggleLanguageMenu()" [attr.aria-expanded]="isLanguageMenuOpen">
    <div class="globe" aria-hidden="true">ğŸŒ</div>
    <span>{{ currentLanguage === 'ar' ? 'Ar' : 'En' }}</span>
    <span class="caret">â–¾</span>
  </div>
  <div class="lang-menu" [hidden]="!isLanguageMenuOpen" role="menu">
    <button (click)="changeLanguage('ar')" role="menuitem">Arabic</button>
    <button (click)="changeLanguage('en')" role="menuitem">English</button>
  </div>
</header>

<main class="split" id="app">
  <!-- Right: Logo / brand panel -->
  <aside class="pane right">
    <div class="brand" aria-label="Logix â€“ Lijan Teck brand">
      <div class="logo" aria-hidden="true">LJ</div>
      <h1>Lijan Teck</h1>
      <div class="tag">Logix</div>
    </div>
  </aside>

  <!-- Left: Registration form -->
  <section class="pane left">
    <form class="card" [formGroup]="signupForm" (ngSubmit)="onSubmit()" novalidate>
      <h2 class="title">{{ currentLanguage === 'ar' ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯' : 'Create New Account' }}</h2>
      <p class="subtitle muted" [innerHTML]="currentLanguage === 'ar' ? 'Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨Ùƒ Ø¹Ù„Ù‰ <b>Lijan Teck</b>.' : 'Complete your data to create your account on <b>Lijan Teck</b>.'"></p>

      <!-- Row 1: Full Name & Company Name -->
      <div class="field-row">
        <div class="field">
          <label for="fullName">{{ currentLanguage === 'ar' ? 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„' : 'Full Name' }}</label>
          <input 
            id="fullName" 
            name="fullName" 
            class="inp" 
            type="text" 
            formControlName="fullName"
            [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù…Ùƒ ÙƒÙ…Ø§ Ø³ÙŠØ¸Ù‡Ø± ÙÙŠ Ø§Ù„ÙÙˆØ§ØªÙŠØ±.' : 'Enter your name as it will appear on invoices.'" 
            autocomplete="name" 
            [ngClass]="{ 'is-invalid': submitted && f['fullName'].errors }"
          />
          @if (submitted && f['fullName'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„ Ù…Ø·Ù„ÙˆØ¨' : 'Full name is required' }}
            </div>
          }
        </div>

        <div class="field">
          <label for="companyName">{{ currentLanguage === 'ar' ? 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©' : 'Company Name' }}</label>
          <input 
            id="companyName" 
            name="companyName" 
            class="inp" 
            type="text" 
            formControlName="companyName"
            [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©' : 'Enter company name'" 
            autocomplete="organization" 
            [ngClass]="{ 'is-invalid': submitted && f['companyName'].errors }"
          />
          @if (submitted && f['companyName'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ© Ù…Ø·Ù„ÙˆØ¨' : 'Company name is required' }}
            </div>
          }
        </div>
      </div>

      <!-- Row 2: Email & Country -->
      <div class="field-row">
        <div class="field">
          <label for="email">{{ currentLanguage === 'ar' ? 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ' : 'Email Address' }}</label>
          <input 
            id="email" 
            name="email" 
            class="inp" 
            type="email" 
            formControlName="email"
            [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ' : 'Enter email address'" 
            autocomplete="email" 
            [ngClass]="{ 'is-invalid': submitted && f['email'].errors }"
          />
          @if (submitted && f['email'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ù…Ø·Ù„ÙˆØ¨' : 'Email address is required' }}
            </div>
          }
        </div>

        <div class="field">
          <label for="country">{{ currentLanguage === 'ar' ? 'Ø§Ù„Ø¯ÙˆÙ„Ø©' : 'Country' }}</label>
          <select 
            id="country" 
            name="country" 
            class="inp" 
            formControlName="country"
            [ngClass]="{ 'is-invalid': submitted && f['country'].errors }"
          >
            <option value="">{{ currentLanguage === 'ar' ? 'Ø§Ø®ØªØ± Ø§Ù„Ø¯ÙˆÙ„Ø©' : 'Choose Country' }}</option>
            <option value="SA">Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠØ©</option>
            <option value="AE">Ø§Ù„Ø¥Ù…Ø§Ø±Ø§Øª Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ø§Ù„Ù…ØªØ­Ø¯Ø©</option>
            <option value="KW">Ø§Ù„ÙƒÙˆÙŠØª</option>
            <option value="QA">Ù‚Ø·Ø±</option>
            <option value="BH">Ø§Ù„Ø¨Ø­Ø±ÙŠÙ†</option>
            <option value="OM">Ø¹Ù…Ø§Ù†</option>
            <option value="JO">Ø§Ù„Ø£Ø±Ø¯Ù†</option>
            <option value="LB">Ù„Ø¨Ù†Ø§Ù†</option>
            <option value="EG">Ù…ØµØ±</option>
            <option value="MA">Ø§Ù„Ù…ØºØ±Ø¨</option>
            <option value="TN">ØªÙˆÙ†Ø³</option>
            <option value="DZ">Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±</option>
          </select>
          @if (submitted && f['country'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø§Ù„Ø¯ÙˆÙ„Ø© Ù…Ø·Ù„ÙˆØ¨Ø©' : 'Country is required' }}
            </div>
          }
        </div>
      </div>

      <!-- Row 3: Phone & Username -->
      <div class="field-row">
        <div class="field">
          <label for="phone">{{ currentLanguage === 'ar' ? 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ' : 'Phone Number' }}</label>
          <input 
            id="phone" 
            name="phone" 
            class="inp" 
            type="tel" 
            formControlName="phone"
            [placeholder]="currentLanguage === 'ar' ? '+9665XXXXXXXX' : '+9665XXXXXXXX'" 
            autocomplete="tel" 
            [ngClass]="{ 'is-invalid': submitted && f['phone'].errors }"
          />
          <div class="helper-text">
            {{ currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ù‡Ø§ØªÙ ØµØ§Ù„Ø­ Ø¨ØµÙŠØºØ© Ø¯ÙˆÙ„ÙŠØ©.' : 'Enter a valid phone number in international format.' }}
          </div>
          @if (submitted && f['phone'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ù…Ø·Ù„ÙˆØ¨' : 'Phone number is required' }}
            </div>
          }
        </div>

        <div class="field">
          <label for="username">{{ currentLanguage === 'ar' ? 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' : 'Username' }}</label>
          <input 
            id="username" 
            name="username" 
            class="inp" 
            type="text" 
            formControlName="username"
            [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' : 'Enter username'" 
            autocomplete="username" 
            [ngClass]="{ 'is-invalid': submitted && f['username'].errors }"
          />
          <div class="helper-text">
            {{ currentLanguage === 'ar' ? 'Ù¤-Ù£Ù  Ø­Ø±ÙØ§Ù‹ØŒ Ø¨Ø¯ÙˆÙ† Ù…Ø³Ø§ÙØ§Øª.' : '4-30 characters, no spaces.' }}
          </div>
          @if (submitted && f['username'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø·Ù„ÙˆØ¨' : 'Username is required' }}
            </div>
          }
        </div>
      </div>

      <!-- Row 4: Password & Confirm Password -->
      <div class="field-row">
        <div class="field">
          <label for="password">{{ currentLanguage === 'ar' ? 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' : 'Password' }}</label>
          <div class="auth-pass-inputgroup">
            <input 
              id="password" 
              name="password" 
              class="inp" 
              [type]="fieldTextType ? 'text' : 'password'" 
              formControlName="password"
              [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' : 'Enter password'" 
              autocomplete="new-password" 
              [ngClass]="{ 'is-invalid': submitted && f['password'].errors }"
            />
          </div>
          
          @if (submitted && f['password'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ§Ù„Ø­Ø©' : 'Password is required' }}
            </div>
          }
        </div>
  
        <div class="field">
          <label for="confirmPassword">{{ currentLanguage === 'ar' ? 'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' : 'Confirm Password' }}</label>
          <div class="auth-pass-inputgroup">
            <input 
              id="confirmPassword" 
              name="confirmPassword" 
              class="inp" 
              [type]="confirmFieldTextType ? 'text' : 'password'" 
              formControlName="confirmPassword"
              [placeholder]="currentLanguage === 'ar' ? 'Ø£Ø¹Ø¯ Ø¥Ø¯Ø®Ø§Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' : 'Re-enter password'" 
              autocomplete="new-password" 
              [ngClass]="{ 'is-invalid': submitted && f['confirmPassword'].errors }"
            />
          </div>
          
          @if (submitted && f['confirmPassword'].errors) {
            <div class="error">
              {{ currentLanguage === 'ar' ? 'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ø·Ù„ÙˆØ¨' : 'Password confirmation is required' }}
            </div>
          }
        </div>
        <div class="field">
          <div class="helper-text">
            {{ currentLanguage === 'ar' ? 'Ù¨ Ø£Ø­Ø±ÙØŒ Ø­Ø±Ù ÙƒØ¨ÙŠØ±/ØµØºÙŠØ±ØŒ Ø±Ù‚Ù…ØŒ Ø±Ù…Ø²' : '8 characters, uppercase/lowercase letter, number, symbol' }}
          </div>
        </div>
      </div>

      <div class="field">
        <div class="helper">
          <label>
            <input type="checkbox" id="terms" formControlName="terms" />
            <span class="muted">
              {{ currentLanguage === 'ar' ? 'Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰' : 'I agree to' }}
              <a href="#" class="accent-link">{{ currentLanguage === 'ar' ? 'Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø®ØµÙˆØµÙŠØ©' : 'Terms and Privacy' }}</a>
            </span>
          </label>
        </div>
        @if (submitted && f['terms'].errors) {
          <div class="error">
            {{ currentLanguage === 'ar' ? 'ÙŠØ¬Ø¨ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø±ÙˆØ· ÙˆØ§Ù„Ø£Ø­ÙƒØ§Ù…' : 'You must agree to the terms and conditions' }}
          </div>
        }
      </div>

      <div class="actions">
        <button class="btn" type="submit" [disabled]="loading">
          {{ loading ? (currentLanguage === 'ar' ? 'Ø¬Ø§Ø±ÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨...' : 'Creating Account...') : (currentLanguage === 'ar' ? 'Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨' : 'Create Account') }}
        </button>
        
        <button type="button" class="btn btn-outline" (click)="goToLogin()">
          {{ currentLanguage === 'ar' ? 'ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„' : 'Login' }}
        </button>
        
        @if (error) {
          <div class="error" aria-live="polite">{{ error }}</div>
        }
      </div>
    </form>

    <footer>
      <div class="foot">
        Â© {{ year }} <strong>Logix</strong> â€” 
        {{ currentLanguage === 'ar' ? 'Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©. Ù„ÙˆØ¬ÙƒØ³ ÙˆÙ„Ø¬Ø§Ù† ØªÙƒ Ø¹Ù„Ø§Ù…Ø§Øª ØªØ¬Ø§Ø±ÙŠØ©.' : 'All rights reserved. Logix and Lijan Teck are trademarks.' }}
      </div>
    </footer>
  </section>
</main>